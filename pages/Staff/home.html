<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Staff Dashboard</title>
    
        <link rel="stylesheet" href="../../style/styleStaff.css">
        <link rel="stylesheet" href="../../style/style.css">
        <link rel="stylesheet" href="../../bootstrap/css/bootstrap.css">
        <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
        <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

        <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    </head>
<body>

<div class="container-fluid">  
    
    <div class="row mx-2 mt-3 border border-dark">
        <div class="col-12 col-lg-1" id="navbarCol">
                <nav class="navbar" id="navbar" >
                        <button class="navbar-toggler bg-light border-dark position-absolute top-0 start-25 mt-3" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseWidthExample" aria-controls="collapseWidthExample" aria-expanded="false"
                            aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>   
                        <div class="collapse collapse-horizontal bg-primary mt-5 " id="collapseWidthExample">
                                <ul class="navbar-nav fs-4 mx-3">
                                    <li class="nav-item">
                                        <a class="nav-link text-light" name="Accounts" aria-current="true" href="adminAccount.html">Accounts</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link text-light" name="crimeReport" href="">Crime Reports</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link text-light" name="Notification" href="">Notification</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link text-light" name="Statistics" href="">Statistics</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link text-light" name="crimeDensityMap" href="">Crime Density Map</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link text-light" name="barangayEvent" href="">Barangay Event</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link text-light" name="signOut" href="">Sign Out</a>
                                    </li>
                                </ul>
                        </div>
                </nav>
            </div>

            <div class="col-11" id="content">
                <div class="container-fluid mt-5 ">
                    <div class="row">
                        <!-- CREATING REPORTS CARD -->
                        <div class="col-md-4">
                            <a href="#" id="createReportButton" class="text-decoration-none" data-bs-toggle="modal" data-bs-target="#createReportModal">
                                <div class="card text-center shadow-sm" style="height: 200px;">
                                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                                        <h5 class="card-title">Create Report</h5>
                                    </div>
                                </div>
                            </a>
                        </div>

                        <!-- NOTIFICATION CARD -->
                        <div class="col-md-4">
                          <a href="#" class="text-decoration-none">
                            <div class="card text-center shadow-sm" style="height: 200px;" id="notification-card" data-bs-toggle="modal" data-bs-target="#notification-modal">
                                <div class="card-body d-flex flex-column justify-content-center align-items-center">
                                    <span class="badge bg-danger" id="report-count">0</span>
                                    <h5 class="card-title">Notifications</h5>
                                    <p id="notif" class="card-text"></p>
                                </div>
                            </div>
                          </a>
                        </div>

                        <!-- Card 1 -->
                        <div class="col-md-4">
                            <a href="#" class="text-decoration-none">
                                <div class="card text-center shadow-sm" style="height: 200px;">
                                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                                        <h5 class="card-title">Crime Reports</h5>
                                        <p class="card-text">View latest crime reports in the dashboard.</p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>

                  <hr>

                  <div class="container-fluid my-4">
                      <h1 class="text-center mb-1">Crime Reports Chart<hr></h1>
                  
                      <!-- Filter Section -->
                      <div class="card p-3 mb-4">
                        <div class="row g-3">
                          <div class="col-md-4">
                            <label for="viewMode" class="form-label">View Mode:</label>
                            <select id="viewMode" class="form-select">
                              <option value="totalCategory">Category Reports</option>
                              <option value="totalReports">Total Reports</option>
                            </select>
                          </div>
                          <div class="col-md-4">
                            <label for="dateRange" class="form-label">Date Range:</label>
                            <input id="dateRange" type="text" class="form-control" placeholder="Select date range">
                          </div>
                          <div class="col-md-4 d-flex align-items-end">
                            <button id="filterButton" class="btn btn-primary w-100">Filter</button>
                          </div>
                        </div>
                      </div>
            
                      <div class="card p-3 mb-4">
                        <div class="row g-3">
                          <div class="col-md-6">
                            <button id="expandButton" class="btn btn-secondary w-100">Expand for Print</button>
                          </div>
                          <div class="col-md-6">
                            <button id="saveButton" class="btn btn-secondary w-100">Save as PDF</button>
                          </div>
                        </div>
                      </div>
                      
                      <div class="card p-3">
                        <!-- Ensure only this div scrolls horizontally -->
                        <div id="chartContainer" style="overflow-x: auto; white-space: nowrap;">
                          <canvas id="crimeChart" style="min-width: 1100px;"></canvas>
                        </div>
                      </div>
                    
                      <h1 class="text-center mb-1 mt-5">Crime Density Map</h1><hr>
                      <div class="map col-12">
                          <div id="map"></div>
                          <br>
                      </div>
                    </div>

            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="notification-modal" tabindex="-1" aria-labelledby="notificationModalLabel">
      <div class="modal-dialog modal-dialog-centered modal-lg">
          <div class="modal-content">
              <div class="modal-header">
                  <h5 class="modal-title" id="notificationModalLabel">Notifications</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                  <table id="notification-table" class="table table-bordered table-hover table-responsive">
                      <thead>
                          <tr>
                              <th>Account ID</th>
                              <th>Witness Name</th>
                              <th>Contact</th>
                              <th>Type of Crime</th>
                              <th>Description</th>
                              <th>Location</th>
                              <th>Actions</th>
                          </tr>
                      </thead>
                      <tbody>
                          <!-- Dynamic rows will be added here -->
                      </tbody>
                  </table>
              </div>
          </div>
      </div>
  </div>

<!--MAP MODAL-->
<div id="myModal" class="modal modalMap">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <!-- Close button styled and positioned to the top-right -->
            <button type="button" class="custom-close" aria-label="Close">&times;</button>
            <div id="map1" style="height: 400px; width: 100%;"></div>
        </div>
    </div>
</div>

<!-- Create Report Modal -->
<div class="modal fade" id="createReportModal" tabindex="-1" aria-labelledby="createReportModalLabel">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="createReportModalLabel">Create Report</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="createReportForm">
                    <!-- Form Fields -->
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="Firstname" class="form-label">First Name: </label>
                            <input type="text" id="firstName" class="form-control" id="crimeType" name="crimeType" required>
                        </div>
                        <div class="col-md-6">
                            <label for="Lastname" class="form-label">Last Name: </label>
                            <input type="text" id="lastName" class="form-control" id="crimeType" name="crimeType" required>
                        </div>
                        <div class="col-md-6">
                            <label for="crimeType" class="form-label">Crime Type</label>
                            <input type="text" id="crimeType" class="form-control" id="crimeType" name="crimeType" required>
                        </div>
                        <div class="col-md-6">
                            <label for="street" class="form-label">Street</label>
                            <input type="text" id="street" class="form-control" id="street" name="street" required>
                        </div>
                        <div class="col-md-12">
                            <label for="description" class="form-label">Description</label>
                            <textarea class="form-control" id="describeID" id="description" name="description"></textarea>
                        </div>
                        <div class="col-md-6">
                            <label for="date" class="form-label">Date</label>
                            <input type="datetime-local" class="form-control" id="date" name="date">
                        </div>
                        <div class="col-md-6 mt-3">
                            <label for="circleID" class="form-label">Area</label>
                            <input type="number" class="form-control" id="circleID" name="circleID" required>
                        </div>
                        <input type="hidden" id="accID" readonly>
                    </div>
                    <!-- Submit Button -->
                    <div class="d-grid gap-2 mt-4">
                        <button type="submit" class="btn btn-success" id="submitReportBtn">Submit</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


<!-- Report Confirmation Modal -->
<div class="modal fade" id="reportConfirmationModal" tabindex="-1" aria-labelledby="reportConfirmationModalLabel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="reportConfirmationModalLabel">Confirm Report Submission</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Are you sure you want to submit this report?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="confirmReportButton">Confirm</button>
            </div>
        </div>
    </div>
</div>


<!-- Delete Confirmation Modal -->
<div class="modal fade" id="deleteConfirmationModal" tabindex="-1" aria-labelledby="deleteConfirmationModalLabel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
            <h5 class="modal-title" id="deleteConfirmationModalLabel">Confirm Deletion</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            Are you sure you want to delete this notification? This action cannot be undone.
            </div>
            <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-danger" id="confirmDeleteButton">Delete</button>
            </div>
        </div>
    </div>
</div>
    
    <script src="../../bootstrap/js/bootstrap.js"></script>
    <script src="../../script/Staff/staffMap.js"></script>
    <script src="../../script/Staff/createReport.js"></script>
    <script src="../../script/chart.js"></script>
    <script src="../../script/Staff/scriptNotification.js"></script>
</body>
</html>