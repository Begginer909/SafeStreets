<form id="createReportForm">
  <label for="crimeType">Crime Type:</label>
  <input type="text" id="crimeType" name="crimeType" required><br><br>

  <label for="description">Description:</label>
  <textarea id="description" name="description" required></textarea><br><br>

  <label for="latitude">Latitude:</label>
  <input type="number" id="latitude" name="latitude" step="0.000001" required><br><br>

  <label for="longitude">Longitude:</label>
  <input type="number" id="longitude" name="longitude" step="0.000001" required><br><br>

  <label for="street">Street:</label>
  <input type="text" id="street" name="street" required><br><br>

  <label>
      <input type="checkbox" id="manualEntry" name="isManual"> Manual Entry
  </label><br><br>

  <div id="manualFields" style="display: none;">
      <label for="createdAt">Created At:</label>
      <input type="datetime-local" id="createdAt" name="createdAt"><br><br>
  </div>

  <label for="status">Status:</label>
  <select id="status" name="status" required>
      <option value="confirmed">Confirmed</option>
  </select><br><br>

  <label for="circleID">Circle ID:</label>
  <input type="number" id="circleID" name="circleID" required><br><br>

  <button type="submit">Submit</button>
</form>

<script>
  const manualEntryCheckbox = document.getElementById('manualEntry');
  const manualFields = document.getElementById('manualFields');

  manualEntryCheckbox.addEventListener('change', () => {
      manualFields.style.display = manualEntryCheckbox.checked ? 'block' : 'none';
  });

  document.getElementById('createReportForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      const formData = new FormData(e.target);
      const data = Object.fromEntries(formData.entries());
      data.isManual = manualEntryCheckbox.checked;

      const response = await fetch('/api/createReport', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data),
      });

      const result = await response.json();
      alert(result.message);
  });
</script>
